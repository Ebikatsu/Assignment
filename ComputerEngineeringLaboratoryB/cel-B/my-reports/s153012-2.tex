\documentclass[a4j]{celb-report}
%%%
%%% 計算機工学実験Bレポートテンプレート
%%%  このテンプレートを使う場合，celb-report.clsとjlisting.styが必要です．
%%%  このファイルと同じディレクトリに置いておいてください．
%%%

%%%
%%% まずはここで各種設定
%%%
\usepackage{comment}
\period{2} % ← 何回目のレポートか（1～3）
\stunum{S153012} % ← 学生番号
\author{伊藤　太清} % ← 学生氏名
\date{\today} % ← レポート提出日

\begin{document}

\maketitle

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% レポート作成の手引：
%   レポート提出時は、ここから「レポート作成の手引ここまで」までの行をすべて削除すること！
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{comment}
\setcounter{section}{-1}
\section{レポート作成の手引}

各レポート，対応する回ごとに章（\verb|\section|）に分け，テキストの報告内容にて指示されている課題ごとに節（\verb|\subsection|）を用意して記載する．次章にて第1回分の例を記載しているので，適宜参考にすること．

% ----------------------------------------------------
\subsection{プログラムのソースコード，実行結果等を掲載する場合}

プログラムのソースコードや実行結果等を貼り付ける場合は，\verb|\lstlisting|環境を用いると良い．使い方は，このファイルの\texttt{tex}ソースを参考にすること．基本的には，ソースに記載の内容をコピーし，実行結果を書き換えると良い．
%
% --- 実行結果ここから
\begin{lstlisting}[basicstyle=\ttfamily\footnotesize, frame=single]

※※ ここに実行結果を貼り付ける． ※※
　
\end{lstlisting}
% --- 実行結果ここまで
%

% ----------------------------------------------------
\subsection{課題}

各回で用意されている考察・調査課題については，\verb|\kadai|を用いて，課題文と回答を記載する．第1回分の例を参考にすること．

% ----------------------------------------------------
\subsection{図の貼り付け}

図を貼り付ける場合は，\verb|\figure|環境を用いる．基本的には，このファイルの\texttt{tex}ソース内にある記述をそのまま用いれば良い．\verb|\includegraphcs|で画像ファイルを指定し，\verb|\caption|で図にキャプションを付ける．\verb|\label|は，本文中で図番号を参照するために付けておくラベルである（詳しくは後述）．
%
\begin{figure}[htb]
 \centering \includegraphics[scale=0.8]{sample-figure.eps}
 \caption{図のサンプル} \label{fig:sample}
\end{figure}
%

本文中で図を引用する場合は，図中で指定した\verb|label|を\verb|\ref|を用いて参照する．例えば上図で\verb|\label{fig:sample}|としている状態で本文中に``図\verb|\ref{fig:sample}|''と記述すると，texコンパイル後のファイルでは当該箇所が``図\ref{fig:sample}''に変換される．``図??''となる場合は，もう1度texコンパイルしてみて，それでも参照がされない場合は，ラベルが一致しているかどうか確認する．

% ----------------------------------------------------
\subsection{（第3レポートのみ）グループ内の役割分担}

第3レポートの対象となる回では，複数人のグループで作業を行うため，各回で誰が何を担当したのかも節（\verb|\subsection|）を用いて記載する．以下は記載例である．\texttt{tex}ソースに記載の通り，\verb|\description|環境を用いると良い．
%
\begin{description}
 \item[s123456 学生 なまえ] ネットワークの配線，環境の構築
 \item[s135791 相方 ひとりめ] プログラムのコーディング，デバッグ
 \item[s246802 相方 ふたりめ] コーディングのサポート
 \item[s369258 相方 さんにんめ] 3人の応援
\end{description}

% ----------------------------------------------------
\subsection{参考文献等}

書籍，インターネット上の情報などを参考にした場合，対象となるすべての回のものをまとめて，\verb|\thebibliography|環境を用いて出展を明記する．書き方は本ファイルの\texttt{tex}ソースを参考にする．
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% レポート作成の手引ここまで
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 第1回分（第1レポート内）サンプル
%   第1レポートでは，第1回～第4回分それぞれを 章 (\section) として1つのレポートにまとめること
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% ------------------------------------------------------------------
\newpage % ← 改ページ
\section{第1回 誤り制御符号(1)：パリティ符号}

% ----------------------------------------------------
\subsection{実行結果}

%
% --- 実行結果ここから
\begin{lstlisting}[basicstyle=\ttfamily\footnotesize, frame=single]
$ ./parity



...


 
\end{lstlisting}
% --- 実行結果ここまで
%

\subsection{実行結果に対する考察}
前節の実行結果より，～であることがわかる．また，～であるものと考えられる．


% ----------------------------------------------------
\subsection{課題}

\kadai{今回の実験で作成したパリティ符号は，偶数パリティと奇数パリティのいずれであるかを答えよ．}

～～～であるため，◯数パリティである．

\kadai{1ビット水平パリティ符号について調査せよ．}

1ビット水平パリティ符号とは，～～ものである．～～．

\kadai{1ビット水平パリティ符号と1ビット垂直パリティ符号を組み合わせることにより，1ビットの誤りを訂正できることを示せ．}

～～．

以上より，1ビット水平パリティ符号と～～～，～～～できる．
\end{comment}
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 第1回分サンプルここまで
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% ------------------------------------------------------------------
\section{第5回 TPCソケットの基礎}
\subsection{プログラムの実行結果}
ECHOクライアントを実行した結果は以下のようになった。
\begin{lstlisting}[basicstyle=\ttfamily\footnotesize, frame=single]
10.232.30.7000
Connect to 10.210.232.30:7000 ...
Socket is connected...
SEND>> cel-B
RECIEVE>> cel-B
SEND>> cel-B
RECIEVE>> cel-B
SEND>> cel-B
RECIEVE>> cel-B
SEND>> ^C
\end{lstlisting}
\begin{comment}
\begin{figure}[htb]
 \centering
 \includegraphics[width=15cm]{../echo-client/echo_client_output.png}
 \caption{echo\_client実行結果} \label{EchoClientOutput}
\end{figure}
\end{comment}
\subsection{プログラムの改造}
クライアントがrecvコマンドで文字列を受け取ったあと、表示する際に、戻ってきた長さを表示するように改造したecho\_client2の実行結果は以下のようになった。
\begin{lstlisting}[basicstyle=\ttfamily\footnotesize, frame=single]
Connect to 10.210.232.137:7000 ...
Socket is connected...
SEND>> cel-B
RECIEVE>> cel-B (5)
SEND>> abc
RECIEVE>> abc (3)
SEND>> qwerty
RECIEVE>> qwerty (6)
SEND>> ^C
\end{lstlisting}
\begin{comment}
\begin{figure}[htb]
 \centering
 \includegraphics[width=15cm]{../echo-client/echo_client2_output.png}
 \caption{echo\_client2実行結果} \label{EchoClient2Output}
\end{figure}
\end{comment}
\subsection{調査課題}
\begin{enumerate}
 \renewcommand{\labelenumi}{(\arabic{enumi})}
 \item 今回のプログラム中で使用されている connect 関数の仕様について調査し, echo\_client.c 中での使用例を書き出し,どのような動作を意図しているかを説明せよ.\\
\\
92,93行目で以下のようにconnect関数が使われている。
  \begin{lstlisting}[basicstyle=\ttfamily\footnotesize, frame=single]
    status = connect(destSocket, (struct sockaddr *)&destSockAddr, 
                    (socklen_t)sizeof(destSockAddr));
  \end{lstlisting}
  \begin{itemize}
   \item 機能:ソケットで接続を確立する。
   \item 引数\\
destSockedは接続に使うソケットのディスクリプタ\\
(struct sockaddr *)\&destSocketAddrは接続先のIPアドレスとポート番号が入ったsockaddr構造体へのポインタ\\
(socklen\_t)sizeof(destSockAddr)はsockaddr構造体のサイズ
   \item 返り値:成功した時0を、失敗した時-1を返す。
  \end{itemize}
 \item 今回のプログラム中で使用されている recv 関数の仕様について調査し, echo\_client.c 中での使用例を書き出し, どのような動作を意図しているかを説明せよ.\\
\\
134行目で以下のようにrecv関数が使われている。
  \begin{lstlisting}[basicstyle=\ttfamily\footnotesize, frame=single]
        numrcv = recv(destSocket, recvStr, BUFFER_LEN, NO_FLAGS_SET);
  \end{lstlisting}
  \begin{itemize}
   \item 機能:メッセージを受信する。
   \item 引数\\
destSocketは受信に使うソケットのディスクリプタ\\
recvStrは受信したデータを受け取るアドレス\\
BUFFER\_LENはメッセージの最大バイト数\\
NO\_FLAGS\_SETはソケットが呼びだされた際の動作を指定する。NO\_FLAGS\_SETはデフォルトの動作
   \item 返り値:成功した時受信したバイト数を、失敗した時-1を返す。
  \end{itemize}
\end{enumerate}


%%% ------------------------------------------------------------------
\newpage
\section{第6回 ECHOサーバの作成}
\subsection{プログラムの実行結果}
echo\_server.cをコピーしてコンパイルして実行させ、別のターミナルを開いて前回のecho\_clientを実行させたところ、サーバ側とクライアント側でそれぞれ以下のような実行結果を得た。
%server-output
\begin{lstlisting}[caption=サーバ側実行結果, basicstyle=\ttfamily\footnotesize, frame=single]
Waiting for connection ...
Connected from 10.210.232.48.
RECIEVE(4)>>abc
RECIEVE(4)>>def
RECIEVE(4)>>ghi
Connection terminated
Waiting for connection ...
Connected from 10.210.232.48.
RECIEVE(4)>>jkl
RECIEVE(4)>>mno
RECIEVE(4)>>pqr
Connection terminated
Waiting for connection ...
Connected from 10.210.232.48.
RECIEVE(4)>>stu
RECIEVE(4)>>vwx
RECIEVE(3)>>yx
Connection terminated
Waiting for connection ...
^C
\end{lstlisting}
%client-output
\begin{lstlisting}[caption=クライアント側実行結果1, basicstyle=\ttfamily\footnotesize, frame=single]
Connect to 10.210.232.48:7000 ...
Socket is connected...
SEND>> abc
RECIEVE>> abc
SEND>> def
RECIEVE>> def
SEND>> ghi
RECIEVE>> ghi
SEND>> ^c
\end{lstlisting}
\begin{lstlisting}[caption=クライアント側実行結果2, basicstyle=\ttfamily\footnotesize, frame=single]
Connect to 10.210.232.48:7000 ...
Socket is connected...
SEND>> jkl
RECIEVE>> jkl
SEND>> mno
RECIEVE>> mno
SEND>> pqr
RECIEVE>> pqr
SEND>> ^c
\end{lstlisting}
\begin{lstlisting}[caption=クライアント側実行結果3, basicstyle=\ttfamily\footnotesize, frame=single]
Connect to 10.210.232.48:7000 ...
Socket is connected...
SEND>> stu
RECIEVE>> stu
SEND>> vwx
RECIEVE>> vwx
SEND>> yz
RECIEVE>> yz
SEND>> ^c
\end{lstlisting}
別の計算機上でサーバを起動させクライアント側でそこに接続した場合も、同様に以下のような実行結果が得られた。
%server-output2
\begin{lstlisting}[caption=サーバ側実行結果, basicstyle=\ttfamily\footnotesize, frame=single]
Waiting for connection ...
Connected from 10.210.232.47.
RECIEVE(4)>>abc
RECIEVE(4)>>def
RECIEVE(4)>>ghi
Connection terminated
Waiting for connection ...
Connected from 10.210.232.47.
RECIEVE(4)>>jkl
RECIEVE(4)>>mno
RECIEVE(4)>>pqr
Connection terminated
Waiting for connection ...
Connected from 10.210.232.47.
RECIEVE(4)>>stu
RECIEVE(4)>>vwx
RECIEVE(3)>>yx
Connection terminated
Waiting for connection ...
^C
\end{lstlisting}
%client-output2
\begin{lstlisting}[caption=クライアント側実行結果1, basicstyle=\ttfamily\footnotesize, frame=single]
Connect to 10.210.232.48:7000 ...
Socket is connected...
SEND>> abc
RECIEVE>> abc
SEND>> def
RECIEVE>> def
SEND>> ghi
RECIEVE>> ghi
SEND>> ^c
\end{lstlisting}
\begin{lstlisting}[caption=クライアント側実行結果2, basicstyle=\ttfamily\footnotesize, frame=single]
Connect to 10.210.232.48:7000 ...
Socket is connected...
SEND>> jkl
RECIEVE>> jkl
SEND>> mno
RECIEVE>> mno
SEND>> pqr
RECIEVE>> pqr
SEND>> ^c
\end{lstlisting}
\begin{lstlisting}[caption=クライアント側実行結果3, basicstyle=\ttfamily\footnotesize, frame=single]
Connect to 10.210.232.48:7000 ...
Socket is connected...
SEND>> stu
RECIEVE>> stu
SEND>> vwx
RECIEVE>> vwx
SEND>> yz
RECIEVE>> yz
SEND>> ^c
\end{lstlisting}
\subsection{プログラムの改造}
ECHO サーバから send コマンドで文字列を送り返すとき,クライアントから送られたきた文字列を,最初の 1 文字ですべて置き換えた文字列に直して送り返すように改造したプログラム echo server2 を作成し、コンパイルしてサーバとクライアントを実行したところ、以下のような実行結果が得られた。
%server-output3
\begin{lstlisting}[caption=サーバ側実行結果, basicstyle=\ttfamily\footnotesize, frame=single]
Waiting for connection ...
Connected from 10.210.232.48.
RECIEVE(4)>>abc
RECIEVE(6)>>cel-B
RECIEVE(7)>>qwerty
Connection terminated
Waiting for connection ...
^C
\end{lstlisting}
%client-output3
\begin{lstlisting}[caption=クライアント側実行結果, basicstyle=\ttfamily\footnotesize, frame=single]
Connect to 10.210.232.48:7000 ...
Socket is connected...
SEND>> abc
RECIEVE>> aaa
SEND>> cel-B
RECIEVE>> ccccc
SEND>> qwerty
RECIEVE>> qqqqqq
SEND>> ^c
\end{lstlisting}
\subsection{加点課題}
クライアントから送られて来た文字列を逆順に並べて送り返すように改造したプログラム echo server3 を作成し、コンパイルしてサーバとクライアントを実行したところ、以下のような実行結果が得られた。
%server-output4
\begin{lstlisting}[caption=サーバ側実行結果, basicstyle=\ttfamily\footnotesize, frame=single]
Waiting for connection ...
Connected from 10.210.232.48.
RECIEVE(4)>>abc
RECIEVE(6)>>cel-B
RECIEVE(7)>>qwerty
Connection terminated
Waiting for connection ...
^C
\end{lstlisting}
%client-output4
\begin{lstlisting}[caption=クライアント側実行結果, basicstyle=\ttfamily\footnotesize, frame=single]
Connect to 10.210.232.48:7000 ...
Socket is connected...
SEND>> abc
RECIEVE>> cba
SEND>> cel-B
RECIEVE>> B-lec
SEND>> qwerty
RECIEVE>> ytrewq
SEND>> ^c
\end{lstlisting}
\subsection{調査課題}
\begin{enumerate}
 \renewcommand{\labelenumi}{(\arabic{enumi})}
 \item bind関数\\
\\
bind関数は92行目で以下のように使われている。
  \begin{lstlisting}[basicstyle=\ttfamily\footnotesize, frame=single]
    bind(serverSocket, (struct sockaddr *)&serverAddress, 
        sizeof(serverAddress));
  \end{lstlisting}
  \begin{itemize}
   \item 機能:ソケットにIPアドレスとポート番号をつける。
   \item 引数\\
serverSocket ソケットのディスクリプタ\\
(struct sockaddr *)\&serverAddress IPアドレスとポート番号が入ったsockaddr構造体へのポインタ\\
sizeof(serverAddress) sockaddr構造体のサイズ
   \item 返り値:成功した時0、失敗した時-1を返す。
  \end{itemize}
 \item listen関数
 \item accept関数
\end{enumerate}
%%% ------------------------------------------------------------------
% --- 参考文献リストここから
\newpage
\begin{thebibliography}{9}
\begin{comment}
\bibitem{book-sample} 神崎映光，西川津ビビッド，出雲島猫，「書籍の参照はこんな感じ」，島大出版，1979年．
\bibitem{url-sample} 島根大学 総合理工学部 数理・情報システム学科（情報系），http://www.cis.shimane-u.ac.jp/．
\end{comment}
\bibitem{bind-sample} Camp Network C言語-bind関数 , http://capm-network.com/?tag=C\%E8\%A8\%80\%E8\%AA\%9E-bind\%E9\%96\%A2\%E6\%95\%B0
\end{thebibliography}
% --- 参考文献リストここまで
%

\end{document}
